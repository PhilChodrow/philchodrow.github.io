<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.339">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Dr.&nbsp;Phil Chodrow - CS Jobs at Small Liberal Arts Colleges</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./assets/img/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><span class="display-name"> Dr.&nbsp;<b>Phil Chodrow</b></span> <span class="hidden" data-render-id="quarto-int-navbar:Research">Research</span> <span class="hidden" data-render-id="quarto-int-navbar:/research.html">/research.html</span> <span class="hidden" data-render-id="quarto-int-navbar:For Students">For Students</span> <span class="hidden" data-render-id="quarto-int-navbar:Teaching">Teaching</span> <span class="hidden" data-render-id="quarto-int-navbar:/teaching.html">/teaching.html</span> <span class="hidden" data-render-id="quarto-int-navbar:FAQs">FAQs</span> <span class="hidden" data-render-id="quarto-int-navbar:/for-students.html">/for-students.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Student Research">Student Research</span> <span class="hidden" data-render-id="quarto-int-navbar:/student-research.html">/student-research.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Mission">Mission</span> <span class="hidden" data-render-id="quarto-int-navbar:/mission.html">/mission.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Resources">Resources</span> <span class="hidden" data-render-id="quarto-int-navbar:/resources.html">/resources.html</span> <span class="hidden" data-render-id="quarto-int-navbar:About">About</span> <span class="hidden" data-render-id="quarto-int-navbar:Me">Me</span> <span class="hidden" data-render-id="quarto-int-navbar:/journey.html">/journey.html</span> <span class="hidden" data-render-id="quarto-int-navbar:My Math Autobiography">My Math Autobiography</span> <span class="hidden" data-render-id="quarto-int-navbar:/math-autobiography.html">/math-autobiography.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Jobs at SLACs">Jobs at SLACs</span> <span class="hidden" data-render-id="quarto-int-navbar:/job_app.html">/job_app.html</span> <span class="hidden" data-render-id="quarto-int-navbar:What I'm Reading">What I’m Reading</span> <span class="hidden" data-render-id="quarto-int-navbar:/reading.html">/reading.html</span> <span class="hidden" data-render-id="quarto-int-navbar:CV">CV</span> <span class="hidden" data-render-id="quarto-int-navbar:https://www.philchodrow.prof/CV/cv.pdf">https://www.philchodrow.prof/CV/cv.pdf</span> <span class="hidden" data-render-id="quarto-int-navbar:Blog">Blog</span> <span class="hidden" data-render-id="quarto-int-navbar:/blog.html">/blog.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Gratitude">Gratitude</span> <span class="hidden" data-render-id="quarto-int-navbar:/acknowledgments.html">/acknowledgments.html</span></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-for-students" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">For Students</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-for-students">    
        <li>
    <a class="dropdown-item" href="./teaching.html">
 <span class="dropdown-text">Teaching</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./for-students.html">
 <span class="dropdown-text">FAQs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./student-research.html">
 <span class="dropdown-text">Student Research</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./mission.html"> 
<span class="menu-text">Mission</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="./journey.html">
 <span class="dropdown-text">Me</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./math-autobiography.html">
 <span class="dropdown-text">My Math Autobiography</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./job_app.html">
 <span class="dropdown-text">Jobs at SLACs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./reading.html">
 <span class="dropdown-text">What I’m Reading</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.philchodrow.prof/CV/cv.pdf">
 <span class="dropdown-text">CV</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./blog.html">
 <span class="dropdown-text">Blog</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./acknowledgments.html"> 
<span class="menu-text">Gratitude</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#consider-slacs-if" id="toc-consider-slacs-if" class="nav-link active" data-scroll-target="#consider-slacs-if">Consider SLACs if…</a></li>
  <li><a href="#my-position" id="toc-my-position" class="nav-link" data-scroll-target="#my-position">My Position</a></li>
  <li><a href="#application-tips" id="toc-application-tips" class="nav-link" data-scroll-target="#application-tips">Application Tips</a>
  <ul class="collapse">
  <li><a href="#before-you-enter-the-job-market" id="toc-before-you-enter-the-job-market" class="nav-link" data-scroll-target="#before-you-enter-the-job-market">Before You Enter the Job Market</a></li>
  <li><a href="#in-your-cover-letter" id="toc-in-your-cover-letter" class="nav-link" data-scroll-target="#in-your-cover-letter">In Your Cover Letter</a></li>
  <li><a href="#when-should-i-diclose-an-academic-partner" id="toc-when-should-i-diclose-an-academic-partner" class="nav-link" data-scroll-target="#when-should-i-diclose-an-academic-partner">When Should I Diclose an Academic Partner?</a></li>
  </ul></li>
  <li><a href="#my-application-materials" id="toc-my-application-materials" class="nav-link" data-scroll-target="#my-application-materials">My Application Materials</a></li>
  <li><a href="#additional-resouces" id="toc-additional-resouces" class="nav-link" data-scroll-target="#additional-resouces">Additional Resouces</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CS Jobs at Small Liberal Arts Colleges</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<p>I work at Middlebury College, a small liberal arts college (SLAC) with a balanced teaching load that attracts academically high-achieving students. I love the SLAC environment and think it’s a great place for many academics. Careers at SLACs offer distinctive advantages and disadvantages when compared to careers at research-intensive institutions. Since SLAC jobs are less visible in PhD-granting institutions than research-intensive jobs, many folks may not know much about what these jobs are like or how to get them. The purpose of this page is to give some basic information about my CS position at Middlebury (which I believe is not atypical of many CS SLAC positions), and to share some tips from my recent experience as both an applicant and a hiring committee member.</p>
<section id="consider-slacs-if" class="level2">
<h2 class="anchored" data-anchor-id="consider-slacs-if">Consider SLACs if…</h2>
<ul>
<li>You love <strong>both</strong> research and teaching, and you want to be incentivized for excellence in each.</li>
<li>You would like to continue your academic career without needing to regularly write grant proposals.</li>
<li>You enjoy mentoring and collaborating with undergraduate students.</li>
</ul>
<p>A SLAC might not be for you if…</p>
<ul>
<li>You prefer to teach as little as possible in order to focus on research.</li>
<li>You are very eager to work with graduate students.</li>
</ul>
</section>
<section id="my-position" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="my-position">My Position</h2>
<p>I started as a tenure-track assistant professor at Middlebury in fall of 2022. Here are the rough contours of my position:</p>
<ul>
<li>My <strong>teaching portfolio</strong> includes introductory CS, machine learning, math foundations of computing (discrete math) and thesis supervision. I will be developing a course on network science in the near future.</li>
<li>My <strong>teaching load</strong> is four 12-week courses per year. Usually these courses are doubled sections of the same course in at least one semester.</li>
<li>My <strong>service expectations</strong> involve contributing to the mission of the department and potentially serving on one committee that serves the broader College. I was exempt from service expectations in my first year, but chose to take up a small role in building our department’s Responsible Computing program. I am currently on the steering committee of midd.data, Middlebury’s initiative around data science and data literacy.</li>
<li>My <strong>salary</strong> is relatively low among CS positions at top liberal arts schools, but there was enough to draw me here regardless.</li>
<li>I am currently funded by roughly $50K of <strong>startup</strong>. My startup package is primarily related to advanced computing needs and additional research travel. I worked out this package with our Dean of Faculty during contract negotiations.</li>
<li>After my startup expires, I will have regular access to $4K/year of <strong>ongoing research funds</strong>. I can apply for grants if I need more funding.</li>
<li>I have not yet taken <strong>research students</strong>, but Middlebury will usually fund 2-3 summer students. I can also take research students for academic credit during the school year.</li>
<li>I will have a full-year <strong>sabbatical</strong> in my fifth year, and then every sixth year thereafter.</li>
<li>I will be <strong>reviewed</strong> in my third year and again (for tenure and promotion) in my seventh year. For tenure, I am expected to demonstrate excellence in teaching and a reputation for significant research in the broader scientific community. There have been no unsuccessful tenure cases in my department.</li>
<li>Some <strong>perks</strong> include very comfortable, subsidized faculty housing; discounts at the College-owned ski areas; and some very nice built-in support networks through the College.</li>
</ul>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">Although my primary experience is in CS departments, I suspect that the following tips will also be useful for folks in math and statistics as well.</span></div></div>
</section>
<section id="application-tips" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="application-tips">Application Tips</h2>
<section id="before-you-enter-the-job-market" class="level3">
<h3 class="anchored" data-anchor-id="before-you-enter-the-job-market">Before You Enter the Job Market</h3>
<p>Consider how you are going to demonstrate both excellence as a researcher and promise as an instructor. Hiring committees understand that not all candidates will have had opportunities to serve as instructors of record at the time they apply. You should, however, give us evidence that you will grow into an outstanding instructor. Some good kinds of evidence include:</p>
<ul>
<li>Student evaluations of teaching (SET) ratings and selected comments.</li>
<li>Materials that you created as an instructor or teaching assistant.</li>
<li>Participation in professional development activities related to teaching.</li>
</ul>
<p>It’s usually expected that at least one of your letters of recommendation will speak to your teaching potential. With this in mind, you should plan early: <em>who will write your teaching letter, and what information will they have?</em> It’s a good idea to ask your prospective writer well in advance. Their letter may be stronger if you can give them materials from previous courses, a draft of your teaching statement, or an opportunity to observe one of your classes.</p>
</section>
<section id="in-your-cover-letter" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="in-your-cover-letter">In Your Cover Letter</h3>
<p>First and foremost, <strong>carefully read the job ad</strong> in order to avoid silly mistakes. If your cover letter highlights your interest in mentoring graduate students, and the institution doesn’t have graduate students, then the committee is unlikely to move forward on your application.</p>
<p>More generally, find ways to connect the job posting to your interests, and share them in your cover letter. My cover letter to Middlebury expressed:</p>
<ul>
<li>My overall interest in the school and the department.</li>
<li>My excitement about the location, including the presence of many collaborators at nearby institutions.</li>
<li>My interest in collaborating on data science initiatives, which I knew from the job ad and the Middlebury website to be an area of institutional focus.</li>
<li>My teaching interests and how I felt these would align with the department’s mission.</li>
</ul>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">I am intending this advice specifically for jobs at SLACs; I claim no insight on what is best to do at larger schools.</span></div></div>
</section>
<section id="when-should-i-diclose-an-academic-partner" class="level3">
<h3 class="anchored" data-anchor-id="when-should-i-diclose-an-academic-partner">When Should I Diclose an Academic Partner?</h3>
<p>If you and your partner are both academics and seeking jobs at the same institution, then you face the question of when to disclose this situation to the hiring committee and the administration. There are a lot of different points of view on this question, with two extremes:</p>
<ol type="1">
<li>Disclose immediately, usually on your cover letter.</li>
<li>Disclose only after you have received a written offer from the school.</li>
</ol>
<p>There are also in-between possibilities, like disclosing after you have completed a first- or second-round interview.</p>
<p>Because SLACs are very small and new positions can be scarce, my personal recommendation is to disclose as early as you feel comfortable. In many cases, it is possible for schools to make arrangements for partner hires, but this usually takes time and multiple layers of administrative decision-making. Disclosing early helps make this possible.</p>
<p>It’s true that disclosing early may cause you not to get interviews that you might otherwise have gotten. That said, these are probably interviews that would not have led to a successful partner hire, so this may not be a loss.</p>
<section id="will-my-partner-also-be-hired-tenure-track" class="level4">
<h4 class="anchored" data-anchor-id="will-my-partner-also-be-hired-tenure-track">Will My Partner Also Be Hired Tenure-Track?</h4>
<p>In my experience, you should expect that a partner-hire situation at a SLAC will <strong>not</strong> result in both partners being immediately hired into tenure-track roles. Tenure lines at SLACs are <em>very</em> difficult to create on short notice. You should expect the school to be invested in the long-term success of both you and your partner, but you may have to be flexible about the details of that journey.</p>
</section>
</section>
</section>
<section id="my-application-materials" class="level2">
<h2 class="anchored" data-anchor-id="my-application-materials">My Application Materials</h2>
<p>Most applications to SLAC positions include statements on research, teaching, and equity, diversity, and inclusion (EDI). I include the statements that brought me to Middlebury in the hopes that they might be useful to future SLAC job-seekers. These statements were <strong>not</strong> tailored to individual schools. My only tailoring was in my cover letter, where I addressed specific courses I could teach and how I would fit into individual departments.</p>
<ul>
<li><a href="assets/pdf/research-cs.pdf">Statement on research</a>.</li>
<li><a href="assets/pdf/teaching-cs.pdf">Statement on teaching</a>.</li>
<li><a href="assets/pdf/EDI.pdf">Statement on equity, diversity, and inclusion (EDI)</a>.</li>
</ul>
<p>A complete application usually also includes a cover letter addressing specific reasons why the candidate is an excellent fit for the specific institution, and 3-4 letters of reference. Usually, at least one of these letters should focus on teaching.</p>
</section>
<section id="additional-resouces" class="level2">
<h2 class="anchored" data-anchor-id="additional-resouces">Additional Resouces</h2>
<ul>
<li>There is a <a href="https://cs-pui.github.io/#deadlines">listing of job postings</a> in computer science at primarily-undergraduate institutions with balanced teaching and research responsibilities, including many SLACs.</li>
<li><a href="https://www.cs.williams.edu/~iris/">Dr.&nbsp;Iris Howley</a> at Williams College provides <a href="https://docs.google.com/document/d/1JGyp7_NJKDAjCpsm8Z5_lty0P76jk3bhPPMdQJaF0nw/edit?usp=sharing">a document with many links</a> related to navigating the job market for CS jobs at primarily-undergraduate institutions.</li>
<li><a href="https://amandastent.net">Dr.&nbsp;Amanda Stent</a> at Colby College has written on <a href="https://medium.com/@ajstent/academic-cs-careers-at-liberal-arts-colleges-917b0d3e82ab">academic CS careers at liberal arts colleges</a>.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>